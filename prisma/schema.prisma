generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model MenuItem {
  id        Int     @id @default(autoincrement())
  name      String
  price     Float
  image     String
  category  String
}
model Table {
  id      Int      @id @default(autoincrement())
  name    String
  qrCode  String
  orders  Order[]  @relation("TableToOrder") // ðŸ”¹ Dodajemy relacjÄ™ do zamÃ³wieÅ„
}
model User {
  id       String  @id @default(uuid())
  email    String  @unique
  password String?  // Nullable dla uÅ¼ytkownikÃ³w Google
  role     Role    @default(USER)
  provider String  @default("credentials") // MoÅ¼emy mieÄ‡ "credentials" lub "google"

  @@map("users")
}

enum Role {
  ADMIN
  USER
}

model Order {
  id         String    @id @default(uuid())
  tableId    Int
  items      Json
  totalPrice Float
  status     Status    @default(PENDING)
  createdAt  DateTime  @default(now())

  table      Table     @relation("TableToOrder", fields: [tableId], references: [id]) // ðŸ”¹ Relacja zwrotna

  @@map("orders")
}

enum Status {
  PENDING
  PREPARING
  READY
  COMPLETED
  CANCELLED
}
